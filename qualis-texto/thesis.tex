% ------------------------------------------------------------------------
% ------------------------------------------------------------------------
% ICMC: Modelo de Trabalho Acadêmico (tese de doutorado, dissertação de
% mestrado e trabalhos monográficos em geral) em conformidade com 
% ABNT NBR 14724:2011: Informação e documentação - Trabalhos acadêmicos -
% Apresentação
% ------------------------------------------------------------------------
% ------------------------------------------------------------------------

% Opções: 
%Qualificação          = qualificacao 
%   Curso                 = doutorado/mestrado
%   Situação do trabalho  = pre-defesa/pos-defesa (exceto para qualificação)
%   Versão para impressão = impressao
%\documentclass[mestrado, pos-defesa]{packages/icmc}
\documentclass[qualificacao, mestrado]{packages/icmc}

% ---------------------------------------------------------------------------
% Pacotes Opcionais
% ---------------------------------------------------------------------------
\usepackage{rotating}           % Usado para rotacionar o texto
\usepackage[all,knot,arc,import,poly]{xy}   % Pacote para desenhos gráficos
% Este pacote pode conflitar com outros pacotes gráficos como o ``pictex''
% Então é necessário usar apenas um dos pacotes conflitantes
\newcommand{\VerbL}{0.52\textwidth}
\newcommand{\LatL}{0.42\textwidth}

\usepackage{amsmath}
\usepackage{tikz}
\usepackage{pgf}
\usetikzlibrary{automata,positioning,arrows.meta}
\usepackage[graphics,tightpage,active,pdftex]
%\usepackage{float}
% ---------------------------------------------------------------------------


% ---
% Informações de dados para CAPA e FOLHA DE ROSTO
% ---
% Tanto na capa quanto nas folhas de rosto apenas a primeira letra da primeira palavra (ou nomes próprios) devem estar em letra maiúscula, todas as demais devem ser em letra minúscula.
\tituloPT{Verificação formal para detecção de vulnerabilidades em contratos inteligentes}
\tituloEN{Formal verification for vulnerability detection in smart contracts}
\autor[Dias, O. D.]{Gustavo Oliveira Dias}
\genero{M} % Gênero do autor (M = Masculino / F = Feminino)
\orientador[Orientador]{Prof. Dr.}{Adenilso da Silva Simão}
%\coorientador{Prof. Dr.}{Fulano de Tal}
\curso{CCMC}
\data{25}{05}{2021} % Data do depósito
\idioma{PT} % Idioma principal do documento (PT = português / EN = inglês)
% ---


% ---
% RESUMOS
% ---

% Resumo em PORTUGUÊS
% conter no máximo 500 palavras
% conter no mínimo 1 e no máximo 5 palavras-chave
\textoresumo[brazil]{
    A tecnologia blockchain, promovida pela criptomoeda Bitcoin, ficou conhecida pela sua capacidade de realizar o gerenciamento de posse descentralizado de criptomoedas por meio de um livro-razão distribuído. Com a introdução da blockchain Ethereum e da linguagem de programação Solidity, foi possível a implantação de contratos inteligentes, que são programas de computador que expressam cláusulas, condições e acordos estabelecidos entre as partes envolvidas. Uma vez implantados, esses contratos executam de forma autônoma, imutável e descentralizada, sem a necessidade de confiar em uma terceira parte reguladora. Desta forma, expandiram-se as aplicações da tecnologia blockchain, que passaram a abranger aplicações descentralizadas, Organizações Autônomas Descentralizadas, governança, finanças, cuidados médicos, entre outras áreas. Em tais aplicações, geralmente há movimentações e gerenciamento de grandes quantias monetárias feitas em Ether, a criptomoeda nativa da Ethereum. Devido a este fator, os contratos inteligentes foram alvos de diversos ataques, que causaram graves perdas financeiras. Nesses ataques, são exploradas vulnerabilidades encontradas no código dos contratos, visto que, em razão da imutabilidade da blockchain, uma vez implantado, um contrato não pode ter seu código atualizado. No primeiro desses ataques, uma aplicação de \textit{crowdfunding} teve todos os seus fundos roubados por um invasor, que transferiu cerca de 150 milhões de dólares em Ether para sua conta, o que despertou a atenção da academia e da indústria para a segurança dos contratos inteligentes. Esta pesquisa tem o objetivo de propor uma estratégia para verificação formal de contratos inteligentes escritos em Solidity para detecção das vulnerabilidades de reentrância, \textit{delegatecall injection} e contrato suicida, por meio da técnica de \textit{model checking}. Para isso, os contratos devem ser convertidos em um modelo formal baseado em estados, e as propriedades de segurança devem ser especificadas, para então dar início ao processo de verificação. Caso alguma das propriedades sejam violadas, será fornecido um contra-exemplo indicando o caminho de execução até a violação, bem como a identificação da vulnerabilidade detectada. Além das vulnerabilidades que são alvos desta pesquisa, também será possível a verificação de propriedades relativas aos requisitos dos contratos. Para evitar trabalhos manuais e a necessidade de conhecimento especializado em métodos formais, a conversão do código deve ser realizada automaticamente, e, para verificação das propriedades, será fornecido um modelo para especificação em linguagem natural. Para validação da proposta, será aplicado um experimento sobre uma amostra de contratos com vulnerabilidades conhecidas para avaliar a eficácia da verificação e coletar dados de desempenho como tempo de execução, consumo de memória e processamento. Além disso, será elaborado ao menos um estudo de caso para verificação de propriedades funcionais relacionadas aos requisitos do contrato. Por meio da proposta exposta neste trabalho, pretende-se contribuir para o aprimoramento da segurança dos contratos inteligentes, assim como prover um meio simplificado para utilização do \textit{model checking}.
    }{Blockchain, Livro-razão distribuído, Contrato inteligente, Verificação formal, \textit{Model-checking}}

%Diante disso, diversos métodos de verificação têm sido propostos para detecção de vulnerabilidades e aprimoramento de segurança dos CIs. As abordagens para verificação baseadas em análise de código mostraram-se ineficientes para contratos complexos, e apresentam taxas consideráveis de falsos positivos e falsos negativos. As abordagens de verificação formal são mais precisas e realizam uma busca mais completa sobre o contrato, porém, costumam exigir conhecimento especializado para modelagem dos contratos, além de limitações de tempo e memória. Assim, técnicas de verificação formal são aplicados geralmente em sistemas críticos, nos quais falhas podem levar à graves prejuízos, como no caso dos CIs.

% resumo em INGLÊS
% conter no máximo 500 palavras
% conter no mínimo 1 e no máximo 5 palavras-chave
\textoresumo[english]{
    Blockchain technology, pioneered by the Bitcoin cryptocurrency, became known for its ability to perform decentralized cryptocurrency ownership management through a distributed ledger. With the introduction of the Ethereum blockchain and the Solidity programming language, it was possible to deploy smart contracts, computer programs that express clauses, conditions and agreements established among the parties involved. Once deployed, these contracts execute in an autonomous, immutable and decentralized way, without relying on a third regulatory party. Therefore, the applications of blockchain technology were expanded, which became to include decentralized applications, Decentralized Autonomous Organizations, governance, finance, health care, among other areas. In such applications, there are usually financial transactions and management of large amounts of Ether, the native cryptocurrency of Ethereum. Such a factor made smart contracts the target of several attacks, which caused severe financial losses. In these attacks, the attacker exploits vulnerabilities found in the contract code. Due to the immutability of the blockchain, once a contract is implemented, it cannot be updated. In the first of these attacks, an attacker stoles all the funds of a crowdfunding application, who transferred about \$150 million in Ether to his account, which have attracted attention from academia and industry to the security of smart contracts. This research aims to propose a strategy for formal verification of smart contracts written in Solidity to detect vulnerabilities of reentrancy, delegatecall injection and suicide contract, through the technique of model checking. To this aim, the contracts must be converted into a formal state-based model, and security properties have to be specified, then the verification process can begin. If any of the properties are violated, a counter-example will be provided indicating the execution path until the violation and identifying the detected vulnerability. In addition to the vulnerabilities that are the targets of this research, it will also be possible to verify properties related to the requirements of the contracts. In order to avoid manual work and the need for specialized knowledge in formal methods, the conversion of the code must be carried out automatically, and to verify the properties, a model for specification in natural language will be provided. To validate the proposal, an experiment will be applied on a sample of contracts with known vulnerabilities to assess the effectiveness of the verification and collect performance data such as execution time, memory, and processing consumption. In addition, will be prepared at least one case study to verify functional properties related to the contract's requirements. Through the proposal exposed in this work, it is intended to contribute to the improvement of the security of smart contracts and provide a simple way to use model checking. 
    }{Blockchain, Distributed Ledger, Smart contract, Formal verification, Model checking}


% ----------------------------------------------------------
% ELEMENTOS PRÉ-TEXTUAIS
% ----------------------------------------------------------

\input{tex/pre-textual}

% ----
% Início do documento
% ----
\begin{document}
% ----------------------------------------------------------
% ELEMENTOS TEXTUAIS
% ----------------------------------------------------------
\textual

\chapter{Introdução}
\label{cap:introducao}
\input{tex/introducao}

\chapter{Fundamentação teórica}
\label{cap:fundamentacao}
\input{tex/fundamentacao}

\chapter{Metodologia e técnicas de pesquisa}
\label{cap:revisao}
\input{tex/revisao}


%\chapter{Trabalhos relacionados}
%\label{cap:trab_relacionados}

\chapter{Método para verificação formal de contratos inteligentes}
\label{cap:proposta}
\input{tex/proposta}

%\chapter{Considerações finais}
%\label{cap:cons_finais}

%\chapter{Revisão bibliográfica}
%\label{cap:revisao}
%\input{tex/revisao}


% ---
% Finaliza a parte no bookmark do PDF, para que se inicie o bookmark na raiz
% ---
\bookmarksetup{startatroot}% 
% ---

% ----------------------------------------------------------
% ELEMENTOS PÓS-TEXTUAIS
% ----------------------------------------------------------
%\postextual

% ----------------------------------------------------------
% Referências bibliográficas
% ----------------------------------------------------------
\bibliography{references}

% ---------------------------------------------------------------------
% GLOSSÁRIO
% ---------------------------------------------------------------------

% Arquivo que contém as definições que vão aparecer no glossário

\input{tex/glossario}

% Comando para incluir todas as definições do arquivo glossario.tex
\glsaddall
% Impressão do glossário
\printglossaries


% APÊNDICES E ANEXOS
%\input{tex/apendices-anexos}

\end{document}